{% extends 'shop/base.html' %}

{% block title %}Purchase{% endblock %}

{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/purchase.css' %}">
{% endblock %}

{% block content %}
<a href="{% url 'cart' %}">â¬… Back To Cart</a>

<!-- User Information -->
<div class="section-card">
    <h3>ğŸ“Œ Delivery address:</h3>
    <p><strong>{{ purchase_info.user_name }}</strong> | {{ purchase_info.address }} | {{ purchase_info.phone }}</p>
    <button>âœï¸ Edit address</button>
</div>

<!-- Payment Methods -->
<div class="section-card">
    <h3>ğŸ’³ Choose your payment method:</h3>
    <p>{{ purchase_info.payment_method }}</p>
    <button>âœï¸ Change payment method</button>
</div>

<!-- Shopping cart items -->
{% if cart_items %}
    <h3>ğŸ›’ Items from Cart</h3>
    {% for item in cart_items %}
        <div class="purchase-item-card">
            <div class="purchase-item-info">
                <h3>ğŸ”¹ {{ item.name }}</h3>
                <p>Â£{{ item.price }} | Quantity: {{ item.quantity }} | Price: Â£{{ item.price|floatformat:2 }}</p>
            </div>
        </div>
    {% endfor %}
{% endif %}

<!-- Items to buy now -->
{% if direct_purchase %}
    <h3>âš¡ Direct Purchase</h3>
    <div class="purchase-item-card">
        <div class="purchase-item-info">
            <h3>ğŸ”¹ {{ direct_purchase.name }}</h3>
            <p>Â£{{ direct_purchase.price }} | Quantity: {{ direct_purchase.quantity }} | Price: Â£{{ direct_purchase.price|floatformat:2 }}</p>
        </div>
    </div>
{% endif %}

<!-- Order Total -->
<div class="summary-and-button">
    <div class="order-summary">
        <p><strong>Total price:</strong> Â£{{ total_price|floatformat:2 }}</p>
        <p><strong>Shipping:</strong> Â£{{ shipping_fee|floatformat:2 }}</p>
        <p><strong>Actual payment:</strong> Â£{{ actual_payment|floatformat:2 }}</p>
    </div>

    <!-- Order Submit Button -->
    <a href="{% url 'create_order' %}" class="checkout-button">âœ… Place Order & Pay</a>
</div>

{% endblock %}
